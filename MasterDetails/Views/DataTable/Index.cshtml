@model System.Data.DataRowCollection
@using System.Data;
@{
    ViewBag.Title = "Index";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<head>
    <script src="~/Scripts/jquery-3.4.1.min.js"></script>

</head>
<h2>Index</h2>

<div class="panel panel-default">
    <div class="panel-heading">
        <div class="row">
            <h2 class="panel-title pull-left">
                <span>
                    Orders
                </span>
            </h2>
            <button class="btn btn-primary pull-right" id="addNewItem" data-toggle="modal" data-target="#newOrderModal" style="margin-right: 5px;">Add New</button>
        </div>
    </div>
    <div class="panel-body">
        <table class="table table-striped table-bordered" id="ordersTable">
            <thead>
                <tr>
                    <th></th>
                   <th></th>
                    <th></th>
                    <th></th>
                </tr>
            </thead>
            <tbody>
                @foreach (System.Data.DataRow row in Model)
                {
                     Guid id = Guid.Parse(row.ItemArray[0].ToString()); 
                    <tr>



                        @for (int i= 1;i<row.ItemArray.Length;i++)
                        {
                          <td>@row.ItemArray[i]</td>
                          
                        }
                    <td><a href="#" data-masterId="@id" class="editDetails">Edit</a></td>
                        
                    </tr>
                   
                }
            </tbody>
        </table>
    </div>

</div>

<div class="modal fade" id="newOrderModal" role="dialog" tabindex="-1">
    <div class="modal-dialog modal-lg" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <button aria-label="Close" class="close" data-dismiss="modal" type="button"><span aria-hidden="true">×</span></button>


                <h4 class="modal-title">
                    New Order Information
                </h4>
            </div>
            <div class="modal-body" id="newOrderModalbody">

            </div>


            <div class="modal-footer">
                <button class="btn btn-default" data-dismiss="modal" type="button">Close</button>
                <button class="btn btn-primary" id="saveOrder" type="button">Save Order</button>
            </div>
        </div>
    </div>
</div>

<script>
    @*$("#addNewItem").click(function () {
       var url = '@Url.Action("NewOrder", "DataTable")'
        $("#newOrderModalbody").load(url, function () {
        });
    })*@
    $(".editDetails").click(function () {
        var data = $(this).data()
        var id = data.masterid;
        var url = '@Url.Action("NewOrder","DataTable")?MasterId=' +id
       
        $("#newOrderModalbody").load(url, function () {
        });
        $("#newOrderModal").modal("show");
    })
</script>